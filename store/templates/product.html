{% extends 'base.html' %}
{% load static %}
{% block content %}


<link rel="stylesheet" href="{% static 'new/css/bootstrap.min.css' %}">
  <!-- animate CSS -->
  <link rel="stylesheet" href="{% static 'new/css/animate.css' %}">
  <!-- owl carousel CSS -->
  <link rel="stylesheet" href="{% static 'new/css/owl.carousel.min.css' %}">
  <!-- nice select CSS -->
  <link rel="stylesheet" href="{% static 'new/css/nice-select.css' %}">
  <!-- font awesome CSS -->
  <link rel="stylesheet" href="{% static 'new/css/all.css' %}">
  <!-- flaticon CSS -->
  <link rel="stylesheet" href="{% static 'new/css/flaticon.css' %}">
  <link rel="stylesheet" href="{% static 'new/css/themify-icons.css' %}">
  <!-- font awesome CSS -->
  <link rel="stylesheet" href="{% static 'new/css/magnific-popup.css' %}">
  <!-- swiper CSS -->
  <link rel="stylesheet" href="{% static 'new/css/slick.css' %}">
  <link rel="stylesheet" href="{% static 'new/css/price_rangs.css' %}">
  <!-- style CSS -->
  <link rel="stylesheet" href="{% static 'new/css/style.css' %}">

    <br><br><br>

    <section class="py-5">
        <div class="container px-4 px-lg-5 my-5 mb-3 shadow-sm p-3 mb-5 bg-white rounded">
            <div class="row gx-4 gx-lg-5 align-items-center"> 

                <div class="col-md-6">
                    <!-- Product Image Display -->
                    <div class="image-container text-center">
                        <img id="product-image" class="card-img-top mb-3" 
                            src="{{ product.image.url }}" alt="{{ product.name }}" />
                    </div>
                    <!-- Navigation Buttons Below the Image -->
                    <div class="text-center mt-2">
                        <button id="prev-btn" class="btn btn-outline-dark">
                            &lt; <!-- "<" Symbol -->
                        </button>
                        <button id="next-btn" class="btn btn-outline-dark">
                            &gt; <!-- ">" Symbol -->
                        </button>
                    </div>
                </div>



                <div class="col-md-6">
                    <div class="small mb-1">SKU: BST-498</div>
                    <h1 class="display-5 fw-bolder">{{ product.name}}</h1>
                        
                    {% if product.is_sale %}
                    <div class="fs-5 mb-5">
                      <h4>R {{ product.sale_price }}  &nbsp;<strike>R {{ product.price }}</strike></h4>
                    </div>
                    {% else %}
                        <div class="fs-5 mb-5">
                        <span>R {{ product.price}}</span>
                    </div>
                    {% endif %}

                    <p class="">{{ product.small_description }}</p>
                    <!-- <input class="form-control text-center me-3" id="inputQuantity" type="num" value="1" style="max-width: 3rem" />0
                    <br>-->
                    <div class="row justify-content">
                        <div class="col-md-2">Qty:</div>
                            <div class="col-md-5 ">
                                <div class="col-md-7 col-sm-1 ">
                                    <select class="form-select form-select-sm " id="qty-cart">
                                        {% for key, value in quantities.items %}
                                        {% if key == product.id|slugify %}
                                            <option selected>{{ value }}</option>
                                        {% endif %}
                                        {% endfor %}
                                        <option value="1">1</option>
                                        <option value="2">2</option>
                                        <option value="3">3</option>
                                        <option value="4">4</option>
                                        <option value="5">5</option>
                                    </select>
                                </div>
                            </div>  
                        </div>
                        <br>
                            <button class="btn_3" type="submit" value="{{ product.id }}" id="add-cart">
                            <i class="bi-cart-fill me-1"></i> Add to cart
                            </button>
                    </div>
                </div>
                <br><br>
                <!--  
                <div class="card mb-3 shadow-sm p-3 mb-5 bg-white rounded">
                    <div class="row g-0">
                        <div class="col-md-10">
                            <div class="card-body">
                                <h6 class="card-title"><b>Description</b></h6>
                                <p class="card-text" id="description" style="margin: 0; font-size: 14px; color: #333;">
                                    {{ product.description }}
                                </p>
                                <a href="#" id="see-more" 
                                style="color: blue; cursor: pointer; text-decoration: underline;" 
                                onclick="toggleDescription(event)">See more</a>
                            </div>
                        </div>
                    </div>
                </div>-->
            </div>               
        </div>            
    </section>

    <section class="product_description_area">
    <div class="container">
      <ul class="nav nav-tabs" id="myTab" role="tablist">
        <li class="nav-item">
          <a class="nav-link" id="home-tab" data-toggle="tab" href="#home" role="tab" aria-controls="home"
            aria-selected="true">Description</a>
        </li>

        <!-- 
        <li class="nav-item">
          <a class="nav-link" id="profile-tab" data-toggle="tab" href="#profile" role="tab" aria-controls="profile"
            aria-selected="false">Specification</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" id="contact-tab" data-toggle="tab" href="#contact" role="tab" aria-controls="contact"
            aria-selected="false">Comments</a>
        </li>-->
        <li class="nav-item">
          <a class="nav-link active" id="review-tab" data-toggle="tab" href="#review" role="tab" aria-controls="review"
            aria-selected="false">Reviews</a>
        </li>
      </ul>
      <div class="tab-content" id="myTabContent">
        <div class="tab-pane fade" id="home" role="tabpanel" aria-labelledby="home-tab">
          <p>
            {{ product.description }}
          </p>
        </div>
        <div class="tab-pane fade" id="profile" role="tabpanel" aria-labelledby="profile-tab">
          <div class="table-responsive">
            <table class="table">
              <tbody>
                <tr>
                  <td>
                    <h5>Width</h5>
                  </td>
                  <td>
                    <h5>128mm</h5>
                  </td>
                </tr>
                <tr>
                  <td>
                    <h5>Height</h5>
                  </td>
                  <td>
                    <h5>508mm</h5>
                  </td>
                </tr>
                <tr>
                  <td>
                    <h5>Depth</h5>
                  </td>
                  <td>
                    <h5>85mm</h5>
                  </td>
                </tr>
                <tr>
                  <td>
                    <h5>Weight</h5>
                  </td>
                  <td>
                    <h5>52gm</h5>
                  </td>
                </tr>
                <tr>
                  <td>
                    <h5>Quality checking</h5>
                  </td>
                  <td>
                    <h5>yes</h5>
                  </td>
                </tr>
                <tr>
                  <td>
                    <h5>Freshness Duration</h5>
                  </td>
                  <td>
                    <h5>03days</h5>
                  </td>
                </tr>
                <tr>
                  <td>
                    <h5>When packeting</h5>
                  </td>
                  <td>
                    <h5>Without touch of hand</h5>
                  </td>
                </tr>
                <tr>
                  <td>
                    <h5>Each Box contains</h5>
                  </td>
                  <td>
                    <h5>60pcs</h5>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
        <div class="tab-pane fade" id="contact" role="tabpanel" aria-labelledby="contact-tab">
          <div class="row">
            <div class="col-lg-6">
              <div class="comment_list">
                <div class="review_item">
                  <div class="media">
                    <div class="d-flex">
                      <img src="img/product/single-product/review-1.png" alt="" />
                    </div>
                    <div class="media-body">
                      <h4>Blake Ruiz</h4>
                      <h5>12th Feb, 2017 at 05:56 pm</h5>
                      <a class="reply_btn" href="#">Reply</a>
                    </div>
                  </div>
                  <p>
                    Lorem ipsum dolor sit amet, consectetur adipisicing elit,
                    sed do eiusmod tempor incididunt ut labore et dolore magna
                    aliqua. Ut enim ad minim veniam, quis nostrud exercitation
                    ullamco laboris nisi ut aliquip ex ea commodo
                  </p>
                </div>
                <div class="review_item reply">
                  <div class="media">
                    <div class="d-flex">
                      <img src="img/product/single-product/review-2.png" alt="" />
                    </div>
                    <div class="media-body">
                      <h4>Blake Ruiz</h4>
                      <h5>12th Feb, 2017 at 05:56 pm</h5>
                      <a class="reply_btn" href="#">Reply</a>
                    </div>
                  </div>
                  <p>
                    Lorem ipsum dolor sit amet, consectetur adipisicing elit,
                    sed do eiusmod tempor incididunt ut labore et dolore magna
                    aliqua. Ut enim ad minim veniam, quis nostrud exercitation
                    ullamco laboris nisi ut aliquip ex ea commodo
                  </p>
                </div>
                <div class="review_item">
                  <div class="media">
                    <div class="d-flex">
                      <img src="img/product/single-product/review-3.png" alt="" />
                    </div>
                    <div class="media-body">
                      <h4>Blake Ruiz</h4>
                      <h5>12th Feb, 2017 at 05:56 pm</h5>
                      <a class="reply_btn" href="#">Reply</a>
                    </div>
                  </div>
                  <p>
                    Lorem ipsum dolor sit amet, consectetur adipisicing elit,
                    sed do eiusmod tempor incididunt ut labore et dolore magna
                    aliqua. Ut enim ad minim veniam, quis nostrud exercitation
                    ullamco laboris nisi ut aliquip ex ea commodo
                  </p>
                </div>
              </div>
            </div>
            <div class="col-lg-6">
              <div class="review_box">
                <h4>Post a comment</h4>
                <form class="row contact_form" action="contact_process.php" method="post" id="contactForm"
                  novalidate="novalidate">
                  <div class="col-md-12">
                    <div class="form-group">
                      <input type="text" class="form-control" id="name" name="name" placeholder="Your Full name" />
                    </div>
                  </div>
                  <div class="col-md-12">
                    <div class="form-group">
                      <input type="email" class="form-control" id="email" name="email" placeholder="Email Address" />
                    </div>
                  </div>
                  <div class="col-md-12">
                    <div class="form-group">
                      <input type="text" class="form-control" id="number" name="number" placeholder="Phone Number" />
                    </div>
                  </div>
                  <div class="col-md-12">
                    <div class="form-group">
                      <textarea class="form-control" name="message" id="message" rows="1"
                        placeholder="Message"></textarea>
                    </div>
                  </div>
                  <div class="col-md-12 text-right">
                    <button type="submit" value="submit" class="btn_3">
                      Submit Now
                    </button>
                  </div>
                </form>
              </div>
            </div>
          </div>
        </div>
        <div class="tab-pane fade show active" id="review" role="tabpanel" aria-labelledby="review-tab">
          <div class="row">
            <div class="col-lg-6">
              <div class="row total_rate">
                <div class="col-6">
                  <div class="box_total">
                    <h5>Overall</h5>
                    <h4>4.0</h4>
                    <h6>(03 Reviews)</h6>
                  </div>
                </div>
                <div class="col-6">
                  <div class="rating_list">
                    <h3>Based on 3 Reviews</h3>
                    <ul class="list">
                      <li>
                        <a href="#">5 Star
                          <i class="fa fa-star"></i>
                          <i class="fa fa-star"></i>
                          <i class="fa fa-star"></i>
                          <i class="fa fa-star"></i>
                          <i class="fa fa-star"></i> 01</a>
                      </li>
                      <li>
                        <a href="#">4 Star
                          <i class="fa fa-star"></i>
                          <i class="fa fa-star"></i>
                          <i class="fa fa-star"></i>
                          <i class="fa fa-star"></i>
                          <i class="fa fa-star"></i> 01</a>
                      </li>
                      <li>
                        <a href="#">3 Star
                          <i class="fa fa-star"></i>
                          <i class="fa fa-star"></i>
                          <i class="fa fa-star"></i>
                          <i class="fa fa-star"></i>
                          <i class="fa fa-star"></i> 01</a>
                      </li>
                      <li>
                        <a href="#">2 Star
                          <i class="fa fa-star"></i>
                          <i class="fa fa-star"></i>
                          <i class="fa fa-star"></i>
                          <i class="fa fa-star"></i>
                          <i class="fa fa-star"></i> 01</a>
                      </li>
                      <li>
                        <a href="#">1 Star
                          <i class="fa fa-star"></i>
                          <i class="fa fa-star"></i>
                          <i class="fa fa-star"></i>
                          <i class="fa fa-star"></i>
                          <i class="fa fa-star"></i> 01</a>
                      </li>
                    </ul>
                  </div>
                </div>
              </div>
              <div class="review_list">
                <div class="review_item">
                  <div class="media">
                    <div class="d-flex">
                      <img src="img/product/single-product/review-1.png" alt="" />
                    </div>
                    <div class="media-body">
                      <h4>Blake Ruiz</h4>
                      <i class="fa fa-star"></i>
                      <i class="fa fa-star"></i>
                      <i class="fa fa-star"></i>
                      <i class="fa fa-star"></i>
                      <i class="fa fa-star"></i>
                    </div>
                  </div>
                  <p>
                    Lorem ipsum dolor sit amet, consectetur adipisicing elit,
                    sed do eiusmod tempor incididunt ut labore et dolore magna
                    aliqua. Ut enim ad minim veniam, quis nostrud exercitation
                    ullamco laboris nisi ut aliquip ex ea commodo
                  </p>
                </div>
                <div class="review_item">
                  <div class="media">
                    <div class="d-flex">
                      <img src="img/product/single-product/review-2.png" alt="" />
                    </div>
                    <div class="media-body">
                      <h4>Blake Ruiz</h4>
                      <i class="fa fa-star"></i>
                      <i class="fa fa-star"></i>
                      <i class="fa fa-star"></i>
                      <i class="fa fa-star"></i>
                      <i class="fa fa-star"></i>
                    </div>
                  </div>
                  <p>
                    Lorem ipsum dolor sit amet, consectetur adipisicing elit,
                    sed do eiusmod tempor incididunt ut labore et dolore magna
                    aliqua. Ut enim ad minim veniam, quis nostrud exercitation
                    ullamco laboris nisi ut aliquip ex ea commodo
                  </p>
                </div>
                <div class="review_item">
                  <div class="media">
                    <div class="d-flex">
                      <img src="img/product/single-product/review-3.png" alt="" />
                    </div>
                    <div class="media-body">
                      <h4>Blake Ruiz</h4>
                      <i class="fa fa-star"></i>
                      <i class="fa fa-star"></i>
                      <i class="fa fa-star"></i>
                      <i class="fa fa-star"></i>
                      <i class="fa fa-star"></i>
                    </div>
                  </div>
                  <p>
                    Lorem ipsum dolor sit amet, consectetur adipisicing elit,
                    sed do eiusmod tempor incididunt ut labore et dolore magna
                    aliqua. Ut enim ad minim veniam, quis nostrud exercitation
                    ullamco laboris nisi ut aliquip ex ea commodo
                  </p>
                </div>
              </div>
            </div>
            <div class="col-lg-6">
              <div class="review_box">
                <h4>Add a Review</h4>
                <p>Your Rating:</p>
                <ul class="list">
                  <li>
                    <a href="#">
                      <i class="fa fa-star"></i>
                    </a>
                  </li>
                  <li>
                    <a href="#">
                      <i class="fa fa-star"></i>
                    </a>
                  </li>
                  <li>
                    <a href="#">
                      <i class="fa fa-star"></i>
                    </a>
                  </li>
                  <li>
                    <a href="#">
                      <i class="fa fa-star"></i>
                    </a>
                  </li>
                  <li>
                    <a href="#">
                      <i class="fa fa-star"></i>
                    </a>
                  </li>
                </ul>
                <p>Outstanding</p>
                <form class="row contact_form" action="contact_process.php" method="post" novalidate="novalidate">
                  <div class="col-md-12">
                    <div class="form-group">
                      <input type="text" class="form-control" name="name" placeholder="Your Full name" />
                    </div>
                  </div>
                  <div class="col-md-12">
                    <div class="form-group">
                      <input type="email" class="form-control" name="email" placeholder="Email Address" />
                    </div>
                  </div>
                  <div class="col-md-12">
                    <div class="form-group">
                      <input type="text" class="form-control" name="number" placeholder="Phone Number" />
                    </div>
                  </div>
                  <div class="col-md-12">
                    <div class="form-group">
                      <textarea class="form-control" name="message" rows="1" placeholder="Review"></textarea>
                    </div>
                  </div>
                  <div class="col-md-12 text-right">
                    <button type="submit" value="submit" class="btn_3">
                      Comming Soon
                    </button>
                  </div>
                </form>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>


        <!-- Related items section-->
         <section class="product_list best_seller section_padding">
        <div class="container">
            <div class="row justify-content-center">
                <div class="col-lg-12">
                    <div class="section_tittle text-center">
                        <h2>Related Kicks <span>shop</span></h2>
                    </div>
                </div>
            </div>
            <div class="row align-items-center justify-content-between">
                <div class="col-lg-12">
                    <div class="best_product_slider owl-carousel">
                    

                        {% for product in products %}
                               
                            {% if product.is_sale %}

                            <div class="single_product_item">
                                <a style="text-decoration: none; color: inherit; outline: none;" href="{% url 'product' product.id%}">
                                    <div class="badge bg-danger text-white position-absolute" style="top: 0.5rem; right: 0.5rem">
                                      On  Sale
                                    </div>
                                    <img src="{{ product.image.url }}" alt="">
                                </a>
                                <div class="single_product_text">
                                    <h4>{{ product.name }}</h4>
                                    <h3>R {{ product.sale_price }}  &nbsp;<strike>R {{ product.price }}</strike></h3>
                                 
                                </div>

                            </div>
                         {% else %}
                            <div class="single_product_item">
                                <a style="text-decoration: none; color: inherit; outline: none;" href="{% url 'product' product.id%}">
                                    
                                    <img src="{{ product.image.url }}" alt="">
                                </a>
                                
                                <div class="single_product_text">
                                    <h4>{{ product.name }}</h4>
                                    <h3>R {{ product.price }}</h3>
                                </div>
                            </div>

                           
                            {% endif %}
                        {% endfor %}

               


                    </div>
                </div>
            </div>
        </div>
    </section>
    <script src="{% static 'new/js/jquery-1.12.1.min.js' %}"></script>
       <script>
// Check if button pressed
$(document).on('click', '#add-cart', function(e){
    e.preventDefault();
    $.ajax({
        type: 'POST',
        url: '{% url 'cart_add' %}',
        data: {
    product_id: $('#add-cart').val(),
    product_qty: $('#qty-cart option:selected').text(),
    csrfmiddlewaretoken: '{{ csrf_token }}',
    action: 'post'
        },

        success: function(json){
            //console.log(json)
            document.getElementById("cart_quantity").textContent = json.qty
            location.reload();
        },

        error: function(xhr, errmsg, err){

        }


    });



})




</script> 

       

        <script>
    document.addEventListener("DOMContentLoaded", function () {
        const descriptionElement = document.getElementById("description");
        const originalText = descriptionElement.textContent.trim();
        const maxLength = 100; // Number of characters to show initially

        if (originalText.length > maxLength) {
            const truncatedText = originalText.substring(0, maxLength) + "...";
            descriptionElement.textContent = truncatedText;
            document.getElementById("see-more").style.display = "inline"; // Show "See more" link
        } else {
            document.getElementById("see-more").style.display = "none"; // Hide "See more" link if not needed
        }
        // Function to toggle between full and truncated text
        window.toggleDescription = function (event) {
            event.preventDefault(); // Prevent scrolling to the top
            if (descriptionElement.textContent.endsWith("...")) {
                descriptionElement.textContent = originalText; // Show full text
                document.getElementById("see-more").textContent = "See less";
            } else {
                descriptionElement.textContent = originalText.substring(0, maxLength) + "..."; // Truncate text again
                document.getElementById("see-more").textContent = "See more";
            }
        };
    });
</script>
<script>
    document.addEventListener("DOMContentLoaded", function () {
        // Array of product images
        const images = [
            "{% if product.image %}{{ product.image.url }}{% endif %}",
            "{% if product.image1 %}{{ product.image1.url }}{% endif %}",
            "{% if product.image3 %}{{ product.image3.url }}{% endif %}",
            "{% if product.image4 %}{{ product.image4.url }}{% endif %}",
            "{% if product.image5 %}{{ product.image5.url }}{% endif %}",
            "{% if product.image6 %}{{ product.image6.url }}{% endif %}",
            "{% if product.image7 %}{{ product.image7.url }}{% endif %}",
            "{% if product.image8 %}{{ product.image8.url }}{% endif %}",
        ].filter(Boolean); // Remove empty or undefined URLs

        let currentIndex = 0; // Track the current image index
        const imageElement = document.getElementById("product-image");

        // Function to show an image based on index
        function showImage(index) {
            imageElement.src = images[index];
        }

        // Previous Button
        document.getElementById("prev-btn").addEventListener("click", function () {
            currentIndex = (currentIndex - 1 + images.length) % images.length;
            showImage(currentIndex);
        });

        // Next Button
        document.getElementById("next-btn").addEventListener("click", function () {
            currentIndex = (currentIndex + 1) % images.length;
            showImage(currentIndex);
        });
    });
</script>




{% endblock %}